<div class='panel panel-primary' id='all'>
    <div class='panel-heading'>
        <div class='row'>
            <div class='col-xs-2' id='dfgLbl' vertical-align='middle' align='right'>DataFileGroupId:</div>
            <div class='col-xs-2' align='left' style='color:#000000'><input class="form-control input-lg" type='text' [(ngModel)]='dataFileGroupId' placeholder="Enter DataFileGroupID"/></div>
            <div class='col-xs-1'>
                            <button class='btn btn-success' id='getBtn' (click)='onClickrefreshBatchList()'>
                                Get Files
                            </button>
                    </div>
              <div class="radio-toolbar" align='left'>

                    <input (click)='toggleOverride(0)' type="radio" id="radio1" name="radios" value="0" checked>
                    <label for="radio1">Don't Override Cost Updates</label>

                    <input (click)='toggleOverride(1)' type="radio" id="radio2" name="radios" value="1">
                    <label for="radio2">Override Cost Updates</label>

               </div>

        </div>

    </div>  <!-- panel-heading closure -->
    <div class='panel-body'>




<modal-error></modal-error>
<modal-confirm></modal-confirm>
<body onload='makeTableScroll();'>
<div class='scrollingTable'> 
             <table id='batchFilesTable' resizeable mode="resizeMode" class='table table-striped table-bordered table-condensed' >
                <thead *ngIf= 'attempt!=false && !loading && (batchfiles && batchfiles.length > 0) && !updating && !errorMessage' >
                    <tr>
                        <th>BatchID</th>
                        <th>Description</th>
                        <th>Volume</th>
                        <th>Avg Implant Charge</th>
                        <th>Avg Implant Var Cost</th>
                        <th>Target Avg Implant Var Cost</th>
                        <th>No Update</th>
      
                    </tr>
                </thead>           
                <tbody *ngIf='attempt!=false && !loading && (batchfiles && batchfiles.length > 0) && !updating && !errorMessage'>
                <tr *ngFor='let batchfile of batchfiles; let i = index;'  >
                    <td style="text-align:center">{{batchfile.encounterGroupType}}</td>
                    <td style="text-align:center" (click)="generateURL(batchfile.encounterGroupType)"><a href="" target="_blank">{{batchfile.description}}</a></td> 
                    <!-- <td style="text-align:center"><a href={{batchfile.mstrUrl}} target="_blank"> {{batchfile.description}} </a></td> -->
                    <td style="text-align:center">{{batchfile.volume}}</td>
                    <td style="text-align:center">{{batchfile.avgImpCharge}}</td>
                    <td style="text-align:center">{{batchfile.avgVarCost}}</td>
                    <td style="text-align:center" *ngIf="updateCheckbox.checked!=true" ><input #updateVarCost type="number" min="1" id="updateVarCost" [attr.id]="'updateVarCost' + batchfile.encounterGroupType" [(ngModel)]='updateVarCost[i]' (change)="onUpdateVarCost(batchfile.avgImpCharge,batchfile.encounterGroupType,updateVarCost[i])" aria-label="..."></td>
                     <td *ngIf="updateCheckbox.checked==true"><div></div></td>  
                    <td style="text-align:center"><input #updateCheckbox type="checkbox" id="updateCheckbox" value="option1" (change)="onToggleUpdate(batchfile.avgImpCharge, batchfile.encounterGroupType,updateCheckbox.checked)" aria-label="..."></td>
                </tr> 
                
                </tbody>
               </table>
                <div class= 'panel-heading' *ngIf= 'attempt==false && !loading && !updating'>
                      Enter a DataFileGroupId to get files.
                   </div> 
               <div class= 'panel-heading' *ngIf= 'loading && (!batchfiles || batchfiles.length < 1) && !updating'>
                      Retrieving Batches...
                   </div>   
               <div class= 'panel-heading' *ngIf='!updating && errorMessage'>
                      There was a problem with the web service.  <br> Try again or notify development team.   <br>Error Code: {{errorMessage}}
                   </div>  
                <div class= 'panel-heading' *ngIf='(!batchfiles || batchfiles.length < 1) && !errorMessage && !loading && attempt!=false && !updating'>
                      There is no data for this facility
                   </div>  
                   <div class= 'panel-heading' *ngIf= 'updating && !errorMessage && !loading'>
                      Submitting Cost Updates, please wait...
                   </div> 




           </div> <!-- this is the table-responsive wrapper-->  
        </body>
<!--</div> -->
<div class='row' id='fillerRow'></div>
<div class='row'>
            <div class='col-xs-3' align="left" *ngIf= 'attempt!=false && !loading && (batchfiles && batchfiles.length > 0)'  >
                <button id='getSpendDataBtn' class='btn btn-primary' onclick="window.open('http://medassets.sharepoint.com/sites/spendmanagement/AS/TEPS/TO/Clinical/TIBCO/Processing/SQL/spRP_SCFPO_OrthoSpendData.sql')"> Get Ortho Spend Construct Data</button>
                </div>
                <div class='col-xs-2'></div>
            
             <div class='col-xs-3' >
                <button id='cancelBtn' class='btn btn-primary' (click)='onClickCancel()' > Cancel </button> 
                <button id='saveBtn' class='btn btn-primary' (click)='onClickClose()' > Save </button> 
                <button id='submitBtn' class='btn btn-danger' disabled (click)='onClickSubmit()' > Submit </button> 
              </div> 
     </div>          
        </div>
  
</div>

